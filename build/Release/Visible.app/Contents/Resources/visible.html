<title>Visible Documentation</title>

<table cellspacing=4>
<tr>
  <td><h2>Visible Documentation</h2>
  <td>&nbsp;&nbsp;<img src="../img/icon.jpg" width="64" height="64">

</table>


<h3>Index</h3>
<a href="#general">Application Windows</a><br>
<a href="#importing">Importing Input Data</a><br>
<a href="#capturing">Capturing Video Data</a><br>
<a href="#analyzing">Analyzing Data</a><br>
<a href="#visualizing">Visualizing Data</a><br>
<a href="#timelinenav">Scalar Result Navigation</a><br>
<a href="#monitor">Video Monitor</a><br>
<a href="#annotating">Annotating Experiment Data</a><br>
<a href="#saving">Saving Experiment Data</a><br>
<a href="#opening">Opening a Saved Experiment</a><br>
<a href="#starting">Starting a New Experiment</a><br>
<a href="#newmovie">Loading a New Movie</a><br>

<a name="general"></a>
<h3>Application Windows</h3>

<h4>Main Window</h4>
The application main window has three major areas of functionality: <b>video monitor</b> (top left), <b>settings</b> (top right) and <b>timeline</b> (bottom). 
When data has been analyzed, timeline splits into two areas: <b>track panel</b> (left) and <b>graph panel</b> (right). 

<p>
Track panel displays available scalar and video data tracks. 
<p>
Graph panel displays scalar data track values over time.

<p>
<table cellspacing=4>
<tr><td><img src="../img/main_window.png" width="800" height="600">
<tr><td><center><em>Figure 1. Application functionality areas.</em></center>
</table>

In addition to main window, two smaller data windows can be opened from <code>View</code> menu to display functional visual analysis results: <b>Locomotive Body Graphical Data Display</b> and <b>Locomotive Body Text Data Display</b>.

<h4>Locomotive Body Graphical Data Display</h4>
<p>
Locomotive Body Graphical Data Display can be used to display locomotive body analysis results such as speed, persistence and distance in a graphical form.

<p>
<table cellspacing=4>
<tr><td><img src="../img/loco_graph.png">
<tr><td><center><em>Figure 1a. Locomotive Body Graphical Data Display.</em></center>
</table>

<h4>Locomotive Body Text Data Display</h4>
<p>
Locomotive Body Text Data Display can be used to display locomotive body analysis results such as speed, persistence and distance in a textual form. Letter 'E' after a result value denotes that the result is exportable. Some results may be temporary or experimental and they are not exported by <code>Save As</code> or <code>Export As</code> commands.


<p>
<table cellspacing=4>
<tr><td><img src="../img/loco_text.png">
<tr><td><center><em>Figure 1b. Locomotive Body Text Data Display.</em></center>
</table>

<a name="importing"></a>
<h3>Importing Input Data</h3>

Images can be imported for analysis using <code>File</code> menu command <code>Import Images</code>.<p>
Movies can be imported for analysis using <code>File</code> menu command <code>Import Movie</code>. By default native frame rate from the movie will be used to determine frame interval. Movie frame rate can be overriden by a user-specified frame rate value under <code>Capture</code> settings tab. 

<p>
<table cellspacing=4>
<tr><td><img src="../img/import.png">
<tr><td><center><em>Figure 2. File Import Settings.</em></center>
</table>

<a name="capturing"></a>
<h3>Capturing Video Data</h3>

<table cellspacing=4>
<tr><td><img src="../img/capture.png">
<tr><td><center><em>Figure 3. Capture Settings.</em></center>
</table>

<ol>
<li>Fill in experiment information fields under <a href="#annotating"><code>Experiment</code></a> settings tab to describe the capture and experimental conditions. 
<li>Verify that a Firewire camera is attached. 
<li>Click on <code>Capture</code> settings tab. 
<li>Select <code>Camera</code> analysis source. The camera will be initialized and video image preview will be shown on the <a href="#monitor">video monitor</a>.
<li>Adjust camera focus. Preview image can be scaled up to make focusing easier.
<li>Adjust light level. Saturated (brightest) pixel coloring to red is enabled by default when video image preview is shown. Increase light source brightness or open camera aperture until red pixels start to appear. Then bring the light level down slowly until all red pixels disappear. Lighting is now adjusted to provide maximum dynamic range.
<li>Specify frame interval (default is maximum camera frame rate), capture time and optional pre-capture delay.
<li>Click on <code>Start Capture</code> button or use <code>Capture</code> menu command <code>Capture Movie</code> to start video capture. A file dialog will pop up for choosing video save file. If no pre-capture delay is specified capture will start immediately, otherwise capture will start after pre-capture delay has passed.
</ol> 

<br>Capture stops when the specified capture time has passed or <code>Stop Capture</code> button is clicked. Video data is saved continuously during capture, collected capture metadata will be saved automatically when capture stops.

<a name="analyzing"></a>
<h3>Analyzing Data</h3>


<p>
<table cellspacing=4>
<tr><td><img src="../img/analyze.png">
<tr><td><center><em>Figure 4. Analysis Settings.</em></center>
</table>

<p>
After data has been imported, analysis can be performed. 
<ol>
<li>Click on <code>Analyze</code> settings tab. 
<li>Choose the desired analysis operation.
<li>Choose analysis operation options (if applicable).
<li>Choose an analysis area. The area can be specified with the mouse (on <a href="#monitor">video monitor</a>) or
by using <code>Analysis area</code> setting spin boxes. Clicking on <code>All</code> button will set the analysis area to contain the whole image.
<li>Choose the range of frames to analyze (default is all available frames).
<li>Click on <code>Analyze</code> button to perform analysis.
</ol>

<h4>Analysis Operations<h4>

<ol>
<li>ACI Sliding Window
  <ul><li>Entropy calculation in a temporal sliding window over image data.</ul>

<li>ACI 
   <ul><li>Exhaustive entropy calculation over image data.</ul>

<li>Functional Visual Analysis
   <ul><li>Detection and tracking of locomotive bodies.</ul>
<!--
<li>Muscle Cell Analysis
   <ul><li>Muscle cell length calculation over time.</ul>
-->
</ol>

<h4>Common Analysis Options</h4>

<ol>
<!--
<li>Analysis area Rotation
  <ul><li>Specifies rotation angle of analysis area.</ul>
-->
<li>Analysis area
  <ul><li>Specifies the image area to be used for analysis.</ul>
<li>First Frame to Analyze
  <ul><li>Specifies the first frame to be used for analysis.</ul>
<li>Last Frame to Analyze
  <ul><li>Specifies the last frame to be used for analysis.</ul>
</ol>

<h4>ACI Calculation Options</h4>

All entropy values are in the range [0.0-1.0].

<ol>
<li>Visual Entropy
  <ul><li>Visual entropy of two identical images is 1.0.</ul>

<li>Aggregate Change Index
   <ul><li>Aggregate change index of two identical images is 0.0.</ul>

<li>Diffusion Index
   <ul><li>Definition TBD.</ul>
</ol>

<h4>ACI Sliding Window Options</h4>

<ol>
<li>Window Size
  <ul><li>The number of image frames in sliding temporal window.</ul>

<li>Result Origin
   <ul><li>Determines which frames are used to compute entropy for frame T.
       <ul>
	 <li>Left = result for frame T is computed from frames [T+1, T+2...]
	 <li>Center = result for frame T is computed from frames [...T-1, T+1...]
	 <li>Right = result for frame T is computed from frames [...T-2, T-1]
       </ul>
   </ul>
</ol>

<h4>Functional Visual Analysis Options</h4>

<ol>
<li>Minimum Organism Size
  <ul><li>Minimum organism size in pixels. For example, if minimum size is 10, all locomotive bodies smaller than 10x10 pixels will be ignored.</ul>

<li>Step Count
   <ul><li>How many image frames will be consumed during each detection step.</ul>

<li>Motion Graphics
   <ul><li>When checked, motion vector graphics will be produced for all detected locomotive bodies. <i>Note:</i> if the analysis area contains dozens or hundreds of locomotive bodies, the graphics may consume large amounts of virtual memory.</ul>
<li>Locomotive Body Graphics
   <ul><li>When checked, graphics approximating the boundary of each detected locomotive body will be produced.</ul>
</ol>

<a name="visualizing"></a>
<h3>Visualizing Data</h3>

<p>Movie playback settings control input movie playback direction and speed. The movie can be played backwards or forwards at a specified rate (1x = actual movie frame rate).
 
<p>
If functional visual analysis has been performed, locomotive body visualization settings can be used to control graphical data overlay on video monitor.<p>

<table border=1 cellpadding=4 cellspacing=2>
<tr><td><em><b>Setting</b></em><td><em><b>Action</b></em>
<tr><td>Show locomotive body text<td>Display locomotive body name at locomotive body origin
<tr><td>Show locomotive body position<td>Draw an origin cross marker at locomotive body center
<tr><td>Show locomotive body path<td>Display locomotive body position path from beginning of experiment to current cursor time
</table>
<p>
<table cellspacing=4>
<tr><td><img src="../img/visualize.png">
<tr><td><center><em>Figure 5. Visualization Settings.</em></center>
</table>

<a name="timelinenav"></a>
<h3>Timeline Analysis Result Navigation</h3>

<h4>Track Panel Mouse Commands</h4>

Each row in the track panel represents a video track or an analysis result track.
<p>
<table cellspacing=4>
<tr><td><img src="../img/track_panel.png">
<tr><td><center><em>Figure 6. Result Track Panel.</em></center>
</table>

<p>
<table border=1 cellpadding=4 cellspacing=2>
<tr><td><em><b>Mouse Command</b></em><td><em><b>Action</b></em>

<tr><td>Click on track panel result checkbox<td>Enables/disables graph display of the result
<tr><td>Click on track panel enabled result (anywhere but the checkbox)<td>Highlights the result in graph display
<tr><td>Click on track panel group button (narrow button on the left)<td>Disables/enables graph display of all the results in the group
</table>

<h4>Graph Panel Mouse Commands</h4>

A blue vertical line is used to display the current cursor position. The time (hh:mm:ss) of the current cursor position and the total time of the experiment are shown above the graph panel.
<p>
<table cellspacing=4>
<tr><td><img src="../img/timeline.png">
<tr><td><center><em>Figure 7. Result Graph Panel.</em></center>
</table>
<p>
<table border=1 cellpadding=4 cellspacing=2>
<tr><td><em><b>Mouse Command</b></em><td><em><b>Action</b></em>

<tr><td>Click (and drag)<td>Navigates cursor to chosen (time) frame 
<tr><td>Shift-click and drag left<td>Scrolls graph panel backward
<tr><td>Shift-click and drag right<td>Scrolls graph panel forward
<tr><td>Command-click and drag left/down<td>Scales up graph panel time range
<tr><td>Command-click and drag right/up<td>Scales down graph panel time range
</table>

<h4>Graph Panel Keyboard Commands</h4>

<p>
To use timeline graph panel keyboard commands, first click anywhere on graph panel. 
<p>
<table border=1 cellpadding=4 cellspacing=2>
<tr><td><em><b>Key</b></em><td><em><b>Action</b></em>
<tr><td>Home<td>Navigates cursor to first frame
<tr><td>End<td>Navigates cursor to last frame
<tr><td>Esc<td>Resets scale mode to default and scales graph to show all frames.
<tr><td>Cursor left<td>Navigates cursor backward by one video frame.
<tr><td>Cursor right<td>Navigates cursor forward by one video frame.
<tr><td>Cursor up/down<td>Chooses graph panel result scale mode. There are three modes:
<ol>
  <li>Scale result graph vertically to show [currentMin-currentMax]
  <li>Scale result graph vertically to show [0-currentMax] 
  <li>Scale result graph vertically to show [expectedMin-expectedMax] (default)
</ol>

<tr><td>Shift-Cursor left<td>Scrolls graph panel backward.
<tr><td>Shift-Cursor right<td>Scrolls graph panel forward.

<tr><td>Command-Cursor left/down<td>Scales up graph panel time range.
<tr><td>Command-Cursor right/up<td>Scales down graph panel time range.
<tr><td>Command-Home<td>Scales graph panel to fit all available frames
<!--<tr><td>Command-C<td>Copies highlighted track values to clipboard-->
</table>

<a name="monitor"></a>
<h3>Video Monitor</h3>

<p>
Current analysis area is displayed as a white rectangle. A diagonal corner mark denotes the rectangle origin.
<p>
Scale spinbox can be used to change image scaling percentage. <p>
Saturation checkbox is used to control saturated (brightest) pixel coloring. The checkbox is displayed only during camera preview or capture. When checked, saturated pixels will be colored bright red. When setting up video capture, enable saturated pixel coloring and adjust light source or camera aperture until all red pixels disappear.<p>

Monitor status bar displays current analysis area size, current cursor position in OpenGL world coordinates and image pixel coordinates and current pixel RGB values for color images or raw pixel value for 8-bit gray scale images.

<p>
<table cellspacing=4>
<tr><td><img src="../img/monitor.png">
<tr><td><center><em>Figure 8. Video Monitor.</em></center>
</table>

<h4>Video Monitor Mouse Commands</h4>

<p>Clicking on analysis area rectangle will highlight the result from the selected area. Timeline graph panel will display the scale of the highlighted result.<p>

<table  border=1 cellpadding=4 cellspacing=2>
    <tr><td><i>Mouse Command</i><td><i>Action</i>
    <tr><td>Command-click<td>Pan to clicked point and zoom in
    <tr><td>Command-drag<td>Drag mouse to draw a rectangle. Release mouse button to zoom into drawn rectangle.
    <tr><td>Option-click<td>Pan to clicked point and zoom out
    <tr><td>Shift-click<td>Pan to clicked point
</table>
<h4>Video Monitor Keyboard Commands</h4>

<table  border=1 cellpadding=4 cellspacing=2>
    <tr><td><i>Key</i><td><i>Action</i>
    <tr><td>+<td>Zoom in
    <tr><td>-<td>Zoom out
    <tr><td>Cursor-left<td>Pan left by one pixel
    <tr><td>Cursor-right<td>Pan right by one pixel
    <tr><td>Cursor-up<td>Pan up by one pixel
    <tr><td>Cursor-down<td>Pan down by one pixel
    <tr><td>Home<td>Center image (reset pan)
    <tr><td>Esc<td>Reset scaling to default, center image
</table>
<p>If keyboard commands don't appear to work, click on the image to (re)activate keyboard focus. 
Pressing Shift key while using cursor keys will enable quick pan (5 pixels).
    

<a name="annotating"></a>
<h3>Annotating Capture Data</h3>

It is highly recommneded to fill in experiment information fields under <code>Experiment</code> settings tab to annotate and describe the capture and experimental conditions. These fields will be stored within the capture movie file (file with <code>.rfymov</code> file extension).

<p>
<table cellspacing=4>
<tr><td><img src="../img/experiment.png">
<tr><td><center><em>Figure 9. Experiment Settings.</em></center>
</table>

<a name="saving"></a>
<h3>Saving Analysis Result Data</h3>

Use <code>File</code> menu command <code>Save As</code>. Result data will be saved in XML format. <p>
Use Use <code>File</code> menu command <code>Export As</code> to export result data in CSV (comma separated value) format for easy Excel import. <i>Note:</i> no graphics data can be exported in CSV format.

<p>
If you have performed functional visual analysis and wish to save motion graphics in XML format, you must check Export motion graphics checkbox. <i>Note:</i> full-frame motion graphics data can consume large amounts of disk space (several megabytes per video frame) so it is not recommended to export them for movies longer than a few hundred frames.

<p>
<table cellspacing=4>
<tr><td><img src="../img/export.png">
<tr><td><center><em>Figure 10. Export Settings.</em></center>
</table>

<a name="opening"></a>
<h3>Opening a Saved Experiment</h3>
Use <code>File</code> menu command <code>Open</code> to open a previously saved experiment.
 Use <code>File</code> menu command <code>Open Experiment Template</code> to load previously saved experiment settings without loading experiment results.

<a name="starting"></a>
<h3>Starting a New Experiment</h3>

Use <code>File</code> menu command <code>New Experiment</code>. It start a new Visible application with a blank experiment.

<a name="newmovie"></a>
<h3>Loading a New Movie</h3>

Use <code>File</code> menu command <code>New Experiment</code> to start a new Visible application. Alternatively use <code>File</code> menu command <code>Close</code> to close the current experiment. When the experiment has been closed a new movie can be imported.

<hr>
<center>
<font size=-1>Copyright &copy; 2002-2003 Reify Corporation. All rights reserved.</font><p>
</center>
