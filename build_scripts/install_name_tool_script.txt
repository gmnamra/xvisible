 vf.framework/Versions/A/vf 


  LIBRARIES_FOLDER_PATH=${CONTENTS_FOLDER_PATH}/Libraries
  TARGET_LIBRARIES_PATH=${CONFIGURATION_BUILD_DIR}/${LIBRARIES_FOLDER_PATH}
  ln -sf "Versions/${CURRENT_VERSION}/Libraries" "${CONFIGURATION_BUILD_DIR}/${WRAPPER_NAME}"

  # Fix-up the shared library ID for the Boost Filesystem and System dynamic libraries
  echo "TLP ${TARGET_LIBRARIES_PATH}"
  echo "CL ${CONFIGURATION_BUILD_DIR}/${LIBRARIES_FOLDER_PATH}"
  install_name_tool -id "${TARGET_LIBRARIES_PATH}/libboost_filesystem.dylib""${CONFIGURATION_BUILD_DIR}/${LIBRARIES_FOLDER_PATH}/libboost_filesystem.dylib"
  install_name_tool -id "${TARGET_LIBRARIES_PATH}/libboost_system.dylib""${CONFIGURATION_BUILD_DIR}/${LIBRARIES_FOLDER_PATH}/libboost_system.dylib"

  # Fix-up the link path for the Boost System dynamic library in theBoostFilesytem dynamic library
  install_name_tool -change "libboost_system.dylib" "${TARGET_LIBRARIES_PATH}/libboost_system.dylib" "${CONFIGURATION_BUILD_DIR}/${LIBRARIES_FOLDER_PATH}/libboost_filesystem.dylib"

  # Fix-up the link path for the Boost Filesystem and System dynamic libraries in the wrapper executable
  ##install_name_tool -change "libboost_system.dylib""${TARGET_LIBRARIES_PATH}/libboost_system.dylib""${CONFIGURATION_BUILD_DIR}/${EXECUTABLE_PATH}"
  ##install_name_tool -change "libboost_filesystem.dylib""${TARGET_LIBRARIES_PATH}/libboost_filesystem.dylib""${CONFIGURATION_BUILD_DIR}/${EXECUTABLE_PATH}"










## register executable to framework and framework to executable

## $1 framework executable
## $2 application executable
## $3 path to where frameworks go
## $4 core framework executable if != $1

function relocate_and_register_()
{
	echo "arg1 is $1"
	echo "arg1 is $2"
	echo "arg1 is $3"
	local lastarg=${!#}
	local extraOpArgN=3

    ## path to where frameworks go in the bundle
	echo 'step 1:'
    local frameworksLocation="`dirname $2`/../Frameworks"
    echo "Relocating ${frameworksLocation}"
    local frameworkExecutable="${frameworksLocation}/$1"

## Rewrite install_name of framework
	echo 'step 2:'
    local newInstallName="@executable_path/../Frameworks/$1"
    echo "Relocating ${frameworkExecutable} as ${newInstallName}" 
    install_name_tool -id "${newInstallName}" "${frameworkExecutable}"
## Rewrite install_name in the app
	echo 'step 3:'

    echo "Relocating ${frameworkExecutable} as ${newInstallName} in application" 
## We re-search originalInstallName, in application, because might be different.
    local originalInstallName=`otool -L $2 | grep  $1 | sed -e 's/^\([[:blank:]]*\)\(.*\)\( (.*\)$/\2/'`
    echo "install_name_tool -change ${originalInstallName} ${newInstallName} $2 "
    install_name_tool -change "${originalInstallName}" "${newInstallName}" "$2"

## if we have to also register this framework in the core framework
   if [ $# = "$extraOpArgN" ]
	then
      originalInstallName=`otool -L "$frameworksLocation/$3"| grep  $1 | sed -e 's/^\([[:blank:]]*\)\(.*\)\( (.*\)$/\2/'`
     _register_in_parent_framework ${originalInstallName} ${newInstallName} $frameworksLocation/$3
    fi
 }

function _register_in_parent_framework ()
{
  echo "install_name_tool -change $1 $2 $3"
  install_name_tool -change $1 $2 $3
}
	
relocate_and_register_ vf.framework/Versions/A/vf ${CONFIGURATION_BUILD_DIR}/coreUT.app/Contents/MacOS/coreUT
relocate_and_register_ ASC_DCAM_DEV.framework/Versions/A/ASC_DCAM_DEV ${CONFIGURATION_BUILD_DIR}/coreUT.app/Contents/MacOS/coreUT vf.framework/Versions/A/vf
relocate_and_register_ libboost_filesystem.dylib  ${CONFIGURATION_BUILD_DIR}/coreUT.app/Contents/MacOS/coreUT vf.framework/Versions/A/vf
relocate_and_register_ libboost_system.dylib  ${CONFIGURATION_BUILD_DIR}/coreUT.app/Contents/MacOS/coreUT vf.framework/Versions/A/vf
relocate_and_register_ libboost_system.dylib  ${CONFIGURATION_BUILD_DIR}/coreUT.app/Contents/MacOS/coreUT libboost_filesystem.dylib















_register_in_parent_framework libboost_system.dylib  ${CONFIGURATION_BUILD_DIR}/coreUT.app/Contents/MacOS/coreUT libboost_filesystem.dylib
_register_in_parent_framework ASC_DCAM_DEV.framework/Versions/A/ASC_DCAM_DEV ${CONFIGURATION_BUILD_DIR}/coreUT.app/Contents/MacOS/coreUT vf.framework/Versions/A/vf
_register_in_parent_framework libboost_filesystem.dylib  ${CONFIGURATION_BUILD_DIR}/coreUT.app/Contents/MacOS/coreUT vf.framework/Versions/A/vf
_register_in_parent_framework libboost_system.dylib  ${CONFIGURATION_BUILD_DIR}/coreUT.app/Contents/MacOS/coreUT vf.framework/Versions/A/vf

